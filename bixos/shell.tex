\documentclass{beamer}

\input{../lib/estilo.tex}
\input{../lib/titulo.tex}
\input{../lib/shell.tex}

\usepackage{xspace}
\usepackage{url}
\begin{document}

\newcommand{\software}{\emph{software}\xspace}
\newcommand{\Software}{\emph{Software}\xspace}
\newcommand{\softwarelivre}{\Software Livre\xspace}
\newcommand{\opensource}{\emph{Open-Source}\xspace}
\newcommand{\Shell}{\emph{Shell}\xspace}

\gpsltitle{Aula 02:\\ \Shell}

\begin{frame}{Objetivos}
  \begin{itemize}
  \item Entender as vantagens do uso da linha de comando frente às interfaces
    gráficas.
  \item Conhecer o formato dos comandos e os comandos básicos para realizar
    tarefas cotidianas em um  terminal Unix.
  \end{itemize}
\end{frame}


\begin{frame}{Terminal}
  \begin{figure}[h]
    \centering
    \begin{itemize}
      \item Um terminal é um \emph{front-end} para a entrada de comandos em um
        \Shell.
      \item Existem diversos emuladores de terminal no Linux, como o
        gnome-terminal, o urxvt, o Xfce Terminal, o xterm, etc.
        \item para abrir o gnome-terminal, por exemplo, aperte alt-f2 e
          digite ``gnome-terminal''
          \vfill
          \begin{center}
          \begin{shell}
            \usercmd{echo ``Olá mundo!''}
          \end{shell}
          \end{center}
      \end{itemize}
  \end{figure}
\end{frame}

\begin{frame}{Comandos}
    \begin{figure}[h]
        \centering
        Os comandos de terminal têm o seguinte formato \newline \\
        \begin{shell}
          \usercmd{comando [arg1] [arg2] ...}
        \end{shell}
        \\
        \begin{itemize}
        \item Parâmetros podem ser opcionais e normalmente são passados após um hífen
          ``-'' na forma abreviada ou após dois hífens, na forma completa.
          Exemplo:
        \end{itemize}
        \begin{shell}
          \usercmd{ls -h}\\
          \usercmd{ls -{}-help}
         \end{shell}
        \\
        \begin{itemize}
        \item{Lembre-se que isto é uma convenção, e muitos programas podem não
          seguir!}
        \end{itemize}
    \end{figure}
\end{frame}



\begin{frame}{Elementos da linha de comando}
    \begin{figure}[h]
        \centering
        \begin{shell}
          %TODO marcar usuario, nome da maquina, diretorio e comando
          \usercmd[bixo@maquina:$\mathtt{\sim}$/mc102]{comando}
        \end{shell}
    \end{figure}
\end{frame}

\begin{frame}{Principais comandos - ls}
   \begin{itemize}
   \item \emph{ls} : Lista todos os arquivos do diretório atual.
   \end{itemize}
   \begin{shell}
      \usercmd{ls \\ calcI.pdf \;\; Desktop \;\; Documents \;\; \\  F129
      \;\;\;\;\;\;\; lab03.c \;\;\;\;\; MC102}
   \end{shell}
\end{frame}


\begin{frame}{Principais comandos}
   \begin{itemize}
   \item \emph{echo ``Bixos 2013''} : Escreve na tela o argumento passado.
   \item \emph{ls} : Lista todos os arquivos do diretório atual.
   \item \emph{pwd} : Exibe o diretório atual
   \item \emph{cd} : Muda o diretório atual
     \begin{itemize}
     \item \emph{cd \~{}} : Muda o diretório atual para a sua home
     \item \emph{cd documents} : Entra no diretório ``documents''
     \item \emph{cd ..} : sobe um nível de diretório
     \end{itemize}
   \item \emph{rm aluno.tx} : Remove o arquivo alunos.tx
   \item \emph{mkdir alunos}: Cria um diretório ``Alunos'' dentro do
     diretório atual.
   \end{itemize}
\end{frame}

\begin{frame}{Principais comandos - 2}
   \begin{itemize}
   \item \emph{wget [remote\_file]} : Faz download do arquivo para a sua
     máquina.
   \item \emph{cp [origem] [destino]} : Copia um arquivo de um diretório para
     outro.
   \item \emph{mv [origem] [destino]} : Move um arquivo de um diretório para
     outro.
   \item \emph{cat [file]} : Imprime o arquivo na saída padrão
   \item \emph{grep [Keyword] [file]} : Imprime na saída padrão as linhas do
     arquivo [file] que contém as palavras chaves [Keyword]
   \end{itemize}
\end{frame}


\begin{frame}{Exercício - Comandos básicos}
  Utilizando o terminal e os comandos vistos execute o seguinte procedimento:
  \begin{itemize}
  \item Baixe para a sua home, via terminal, o arquivo:
    \url{http://www.students.ic.unicamp.br/\~ra116931/bixos.txt}
  \item Crie um diretório na sua \emph{home} chamada ``gpsl2013''.
  \item Copie o arquivo baixado para dentro da pasta recém-criada na sua
    \emph{home} e liste os arquivos da pasta para verificar que o arquivo foi
    criado.
  \item Navegue até a pasta e use cat para ler o conteúdo do arquivo.
  \item Use grep para encontrar referências a ``Monty Python'' no arquivo
    baixado.
  \end{itemize}
\end{frame}

%% Redirecionamento de entrada e saída: Redirecionamento de entrada, pipes
%% Tenho minhas duvidas se isso deve ser inserido nesse
%% modulo
\begin{frame}{Redirecionamento de I/O}
  A entrada e saída de programas podem ser redirecionadas de e para arquivos ou
  outros programas. Desta forma, podemos analisar a saída em editores de texto,
  mudar rapidamente os parâmetros de entrada, ou ainda encadear programas, no
  qual a saída de um é a entrada de outro.
  \begin{center}
    \begin{itemize}
    \item Redirecionar a entrada a partir de um arquivo texto ``input.txt'':
    \end{itemize}
    \begin{shell}
      \usercmd{calculator < input.txt}
    \end{shell}

    \begin{itemize}
    \item Redirecionar a saída para um arquivo de texto ``output.txt'':
    \end{itemize}
    \begin{shell}
      \usercmd{calculator > output.txt}
    \end{shell}

    \begin{itemize}
    \item Redirecionar a saída de um programa para outro com pipe ``|'':
    \end{itemize}
    \begin{shell}
      \usercmd{calc1 < in.tx  | calc2}
    \end{shell}
    
  \end{center}

\end{frame}


\begin{frame}{Informações úteis}
  \begin{itemize}
    \item A tecla Tab auto-completa nome de programas, caminho para arquivos,
      etc.
  \item Para rodar um comando em modo de super-usuário, utilize o comando
    \emph{sudo}
  \item Existe também o comando \emph{man}. Ele recebe o nome de um programa
    como argumento e exibe o seu manual.
  \item Outra convenção muito útil é implementar textos de ajuda e de versão.
    Muitos programas implementam isso. Você pode obter as informações fazendo:
  \item O comando \emph{apropos [termo]} pesquisa uma palavra-chave nos arquivos
    do man.
  \end{itemize}
  \begin{center}
    \begin{shell}
      \usercmd{ls -{}-help}\\
      \usercmd{ls -{}-version}\\
      \usercmd{man ls }\\
      \usercmd{apropos browser}
    \end{shell}
  \end{center}
\end{frame}

\begin{frame}
  \begin{center}
    \begin{shell}
      \usercmd{ls /home/ivan}\\
      \usercmd{sudo su}\\
      \rootcmd{rm -rf \slash }\\
      \comment{isso não é uma boa idéia.}\\
      \comment{Mas vai abrir muito}\\
      \comment{espaço livre no seu HD}
    \end{shell}
  \end{center}
\end{frame}

\end{document}
